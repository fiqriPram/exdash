(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22260,66130,t=>{"use strict";var e=t.i(47332),r=t.i(64846);let n={USERS:"autoreport_users",CURRENT_USER:"autoreport_current_user",MAPPINGS:"autoreport_mappings",REPORT_HISTORY:"autoreport_history",SETTINGS:"autoreport_settings"},i={id:"admin-1",username:"admin",name:"Administrator",role:"admin",createdAt:new Date().toISOString()},o={id:"user-1",username:"user",name:"Regular User",role:"user",createdAt:new Date().toISOString()};function a(){localStorage.getItem(n.USERS)||localStorage.setItem(n.USERS,JSON.stringify([i,o]))}function l(){let t=localStorage.getItem(n.USERS);return t?JSON.parse(t):[]}function s(t){let e=l(),r={...t,id:`user-${Date.now()}`,createdAt:new Date().toISOString()};return e.push(r),localStorage.setItem(n.USERS,JSON.stringify(e)),r}function u(t){let e=l(),r=e.filter(e=>e.id!==t);return r.length!==e.length&&(localStorage.setItem(n.USERS,JSON.stringify(r)),!0)}function S(t,e){if(e!==`${t}123`)return null;let r=l().find(e=>e.username===t);return r?(localStorage.setItem(n.CURRENT_USER,JSON.stringify(r)),r):null}function g(){localStorage.removeItem(n.CURRENT_USER)}function c(){let t=localStorage.getItem(n.CURRENT_USER);return t?JSON.parse(t):null}function d(){let t=c();return t?.role==="admin"}function f(t){let e=localStorage.getItem(n.MAPPINGS),r=e?JSON.parse(e):[];return t?r.filter(e=>e.id.startsWith(t)):r}function m(t,e){let r=f(),i={...t,id:`${e}-mapping-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.push(i),localStorage.setItem(n.MAPPINGS,JSON.stringify(r)),i}function p(t){let e=f(),r=e.filter(e=>e.id!==t);return r.length!==e.length&&(localStorage.setItem(n.MAPPINGS,JSON.stringify(r)),!0)}function R(t){let e=localStorage.getItem(n.REPORT_HISTORY),r=e?JSON.parse(e):[];return t?r.filter(e=>e.id.startsWith(t)):r.sort((t,e)=>new Date(e.exportedAt).getTime()-new Date(t.exportedAt).getTime())}function I(t,e){let r=R(),i={...t,id:`${e}-report-${Date.now()}`,exportedAt:new Date().toISOString()};r.unshift(i);let o=r.filter(t=>t.id.startsWith(e)).slice(0,100),a=r.filter(t=>!t.id.startsWith(e));return localStorage.setItem(n.REPORT_HISTORY,JSON.stringify([...o,...a])),i}function O(t){let e=R(),r=e.filter(e=>e.id!==t);return r.length!==e.length&&(localStorage.setItem(n.REPORT_HISTORY,JSON.stringify(r)),!0)}function h(t){if(t){let e=R().filter(e=>!e.id.startsWith(t));localStorage.setItem(n.REPORT_HISTORY,JSON.stringify(e))}else localStorage.removeItem(n.REPORT_HISTORY)}function N(){return JSON.stringify({users:l(),mappings:f(),history:R(),exportedAt:new Date().toISOString(),version:"1.0"},null,2)}function T(t){try{let e=JSON.parse(t);return e.users&&localStorage.setItem(n.USERS,JSON.stringify(e.users)),e.mappings&&localStorage.setItem(n.MAPPINGS,JSON.stringify(e.mappings)),e.history&&localStorage.setItem(n.REPORT_HISTORY,JSON.stringify(e.history)),!0}catch{return!1}}function E(){Object.values(n).forEach(t=>{localStorage.removeItem(t)}),a()}function A(){let t=localStorage.getItem(n.SETTINGS);return t?JSON.parse(t):{deleteAfterExport:!1,defaultPeriod:"monthly"}}function y(t){localStorage.setItem(n.SETTINGS,JSON.stringify(t))}t.s(["addReportToHistory",()=>I,"addUser",()=>s,"clearAllData",()=>E,"clearReportHistory",()=>h,"deleteMapping",()=>p,"deleteReportFromHistory",()=>O,"deleteUser",()=>u,"exportAllData",()=>N,"getCurrentUser",()=>c,"getReportHistory",()=>R,"getSavedMappings",()=>f,"getSettings",()=>A,"getUsers",()=>l,"importAllData",()=>T,"initializeStorage",()=>a,"isAdmin",()=>d,"login",()=>S,"logout",()=>g,"saveMapping",()=>m,"saveSettings",()=>y],66130);let P=(0,r.createContext)(void 0);function U({children:t}){let[n,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{a(),i(c()),l(!1)},[]);let s=async(t,e)=>{let r=S(t,e);return!!r&&(i(r),!0)};return o?(0,e.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,e.jsx)("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(0,e.jsx)(P.Provider,{value:{user:n,isAuthenticated:!!n,isAdmin:d(),login:s,logout:()=>{g(),i(null)}},children:t})}function J(){let t=(0,r.useContext)(P);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}t.s(["AuthProvider",()=>U,"useAuth",()=>J],22260)}]);