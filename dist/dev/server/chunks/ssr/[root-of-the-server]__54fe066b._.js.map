{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/utils/dataParser.ts"],"sourcesContent":["import * as XLSX from \"xlsx\";\nimport {\n  DataRow,\n  ColumnMapping,\n  ValidationError,\n  DataSummary,\n  ProcessedData,\n} from \"@/types\";\n\nexport function parseExcelFile(file: File): Promise<DataRow[]> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      try {\n        const data = e.target?.result;\n        if (!data) {\n          reject(new Error(\"Failed to read file\"));\n          return;\n        }\n\n        const workbook = XLSX.read(data, { type: \"binary\" });\n        const firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json<DataRow>(firstSheet, {\n          header: 1,\n        });\n\n        if (jsonData.length < 2) {\n          reject(\n            new Error(\n              \"File must contain at least a header row and one data row\",\n            ),\n          );\n          return;\n        }\n\n        // Convert array of arrays to array of objects using header row\n        const headers = jsonData[0] as unknown as string[];\n        const rows = jsonData.slice(1).map((row: unknown) => {\n          const rowArray = row as (string | number | Date)[];\n          const obj: DataRow = {};\n          headers.forEach((header, index) => {\n            obj[header] = rowArray[index] ?? \"\";\n          });\n          return obj;\n        });\n\n        resolve(rows);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    reader.onerror = () => reject(new Error(\"Failed to read file\"));\n    reader.readAsBinaryString(file);\n  });\n}\n\nexport function parseCSVFile(file: File): Promise<DataRow[]> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      try {\n        const text = e.target?.result as string;\n        if (!text) {\n          reject(new Error(\"Failed to read file\"));\n          return;\n        }\n\n        const lines = text.split(\"\\n\").filter((line) => line.trim());\n        if (lines.length < 2) {\n          reject(\n            new Error(\n              \"File must contain at least a header row and one data row\",\n            ),\n          );\n          return;\n        }\n\n        const headers = lines[0]\n          .split(\",\")\n          .map((h) => h.trim().replace(/^\"|\"$/g, \"\"));\n        const rows = lines.slice(1).map((line) => {\n          const values = line\n            .split(\",\")\n            .map((v) => v.trim().replace(/^\"|\"$/g, \"\"));\n          const obj: DataRow = {};\n          headers.forEach((header, index) => {\n            obj[header] = values[index] ?? \"\";\n          });\n          return obj;\n        });\n\n        resolve(rows);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    reader.onerror = () => reject(new Error(\"Failed to read file\"));\n    reader.readAsText(file);\n  });\n}\n\nexport function validateData(\n  data: DataRow[],\n  mappings: ColumnMapping[],\n): ValidationError[] {\n  const errors: ValidationError[] = [];\n\n  data.forEach((row, rowIndex) => {\n    mappings.forEach((mapping) => {\n      const value = row[mapping.sourceColumn];\n\n      if (value === undefined || value === null || value === \"\") {\n        errors.push({\n          row: rowIndex + 1,\n          column: mapping.sourceColumn,\n          message: `Missing value for ${mapping.targetField}`,\n          value: value,\n        });\n        return;\n      }\n\n      switch (mapping.dataType) {\n        case \"number\":\n        case \"currency\":\n          if (isNaN(Number(value))) {\n            errors.push({\n              row: rowIndex + 1,\n              column: mapping.sourceColumn,\n              message: `Invalid number format for ${mapping.targetField}`,\n              value: value,\n            });\n          }\n          break;\n        case \"date\":\n          if (isNaN(Date.parse(String(value)))) {\n            errors.push({\n              row: rowIndex + 1,\n              column: mapping.sourceColumn,\n              message: `Invalid date format for ${mapping.targetField}`,\n              value: value,\n            });\n          }\n          break;\n      }\n    });\n  });\n\n  return errors;\n}\n\nexport function generateSummary(\n  data: DataRow[],\n  mappings: ColumnMapping[],\n): DataSummary {\n  const amountMapping = mappings.find(\n    (m) => m.targetField === \"amount\" || m.dataType === \"currency\",\n  );\n  const categoryMapping = mappings.find((m) => m.targetField === \"category\");\n  const dateMapping = mappings.find(\n    (m) => m.targetField === \"date\" || m.dataType === \"date\",\n  );\n\n  let totalAmount = 0;\n  let amountCount = 0;\n  const categories: { [key: string]: number } = {};\n\n  if (amountMapping) {\n    data.forEach((row) => {\n      const value = Number(row[amountMapping.sourceColumn]);\n      if (!isNaN(value)) {\n        totalAmount += value;\n        amountCount++;\n      }\n    });\n  }\n\n  if (categoryMapping) {\n    data.forEach((row) => {\n      const category = String(\n        row[categoryMapping.sourceColumn] || \"Uncategorized\",\n      );\n      categories[category] = (categories[category] || 0) + 1;\n    });\n  }\n\n  let period = \"\";\n  if (dateMapping && data.length > 0) {\n    const dates = data\n      .map((row) => new Date(row[dateMapping.sourceColumn] as string))\n      .filter((d) => !isNaN(d.getTime()))\n      .sort((a, b) => a.getTime() - b.getTime());\n\n    if (dates.length >= 2) {\n      period = `${dates[0].toLocaleDateString()} - ${dates[dates.length - 1].toLocaleDateString()}`;\n    }\n  }\n\n  return {\n    totalRows: data.length,\n    totalAmount: amountCount > 0 ? totalAmount : undefined,\n    averageAmount: amountCount > 0 ? totalAmount / amountCount : undefined,\n    period: period || undefined,\n    categories: Object.keys(categories).length > 0 ? categories : undefined,\n  };\n}\n\nexport function processData(\n  data: DataRow[],\n  mappings: ColumnMapping[],\n): ProcessedData {\n  const columns = Object.keys(data[0] || {});\n  const errors = validateData(data, mappings);\n  const summary = generateSummary(data, mappings);\n\n  return {\n    rawData: data,\n    columns,\n    mappings,\n    summary,\n    errors,\n  };\n}\n\nexport function autoMapColumns(\n  columns: string[],\n  requiredFields: string[],\n): ColumnMapping[] {\n  const mappings: ColumnMapping[] = [];\n\n  const fieldPatterns: {\n    [key: string]: { keywords: string[]; dataType: ColumnMapping[\"dataType\"] };\n  } = {\n    date: {\n      keywords: [\"date\", \"tanggal\", \"tgl\", \"time\", \"waktu\"],\n      dataType: \"date\",\n    },\n    amount: {\n      keywords: [\n        \"amount\",\n        \"total\",\n        \"nominal\",\n        \"harga\",\n        \"price\",\n        \"value\",\n        \"jumlah\",\n      ],\n      dataType: \"currency\",\n    },\n    category: {\n      keywords: [\"category\", \"kategori\", \"type\", \"jenis\", \"group\"],\n      dataType: \"string\",\n    },\n    description: {\n      keywords: [\n        \"description\",\n        \"deskripsi\",\n        \"detail\",\n        \"keterangan\",\n        \"notes\",\n        \"catatan\",\n      ],\n      dataType: \"string\",\n    },\n    name: {\n      keywords: [\"name\", \"nama\", \"person\", \"student\", \"employee\"],\n      dataType: \"string\",\n    },\n    status: { keywords: [\"status\", \"state\", \"condition\"], dataType: \"string\" },\n    quantity: {\n      keywords: [\"quantity\", \"qty\", \"jumlah\", \"count\"],\n      dataType: \"number\",\n    },\n  };\n\n  requiredFields.forEach((field) => {\n    const pattern = fieldPatterns[field];\n    if (!pattern) return;\n\n    const matchedColumn = columns.find((col) =>\n      pattern.keywords.some((keyword) =>\n        col.toLowerCase().includes(keyword.toLowerCase()),\n      ),\n    );\n\n    if (matchedColumn) {\n      mappings.push({\n        sourceColumn: matchedColumn,\n        targetField: field,\n        dataType: pattern.dataType,\n      });\n    }\n  });\n\n  return mappings;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/FileUpload.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useCallback } from \"react\";\nimport {\n  Upload,\n  FileSpreadsheet,\n  FileText,\n  AlertCircle,\n  Check,\n} from \"lucide-react\";\nimport { parseExcelFile, parseCSVFile } from \"@/utils/dataParser\";\nimport { DataRow } from \"@/types\";\n\ninterface FileUploadProps {\n  onDataLoaded: (data: DataRow[], fileName: string) => void;\n  onError: (error: string) => void;\n}\n\nexport default function FileUpload({ onDataLoaded, onError }: FileUploadProps) {\n  const [isDragging, setIsDragging] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState<string | null>(null);\n\n  const handleFile = async (file: File) => {\n    setIsLoading(true);\n    setUploadedFile(null);\n\n    try {\n      const fileExtension = file.name.split(\".\").pop()?.toLowerCase();\n      let data: DataRow[];\n\n      if (fileExtension === \"xlsx\" || fileExtension === \"xls\") {\n        data = await parseExcelFile(file);\n      } else if (fileExtension === \"csv\") {\n        data = await parseCSVFile(file);\n      } else {\n        throw new Error(\n          \"Unsupported file format. Please upload .xlsx, .xls, or .csv files.\",\n        );\n      }\n\n      if (data.length === 0) {\n        throw new Error(\"No data found in the file.\");\n      }\n\n      setUploadedFile(file.name);\n      onDataLoaded(data, file.name);\n    } catch (error) {\n      onError(\n        error instanceof Error ? error.message : \"Failed to process file\",\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const onDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n\n    const files = e.dataTransfer.files;\n    if (files.length > 0) {\n      handleFile(files[0]);\n    }\n  }, []);\n\n  const onDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  }, []);\n\n  const onDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  }, []);\n\n  const onFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      handleFile(files[0]);\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <div\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        onDragLeave={onDragLeave}\n        className={`\n          relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200 cursor-pointer\n          ${\n            isDragging\n              ? \"border-blue-500 bg-blue-50\"\n              : \"border-gray-300 hover:border-gray-400 bg-gray-50\"\n          }\n          ${isLoading ? \"opacity-50 pointer-events-none\" : \"\"}\n        `}\n      >\n        <input\n          type=\"file\"\n          accept=\".xlsx,.xls,.csv\"\n          onChange={onFileInput}\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n          disabled={isLoading}\n        />\n\n        <div className=\"flex flex-col items-center gap-4\">\n          {isLoading ? (\n            <div className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n          ) : uploadedFile ? (\n            <>\n              <div className=\"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center\">\n                <Check className=\"w-6 h-6 text-green-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg font-medium text-gray-900\">\n                  {uploadedFile}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  Click or drag to upload a different file\n                </p>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center\">\n                <Upload className=\"w-6 h-6 text-blue-600\" />\n              </div>\n              <div>\n                <p className=\"text-lg font-medium text-gray-900\">\n                  Drop your file here, or click to browse\n                </p>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  Supports Excel (.xlsx, .xls) and CSV files\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      <div className=\"mt-4 flex gap-4 justify-center\">\n        <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n          <FileSpreadsheet className=\"w-4 h-4\" />\n          <span>Excel files</span>\n        </div>\n        <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n          <FileText className=\"w-4 h-4\" />\n          <span>CSV files</span>\n        </div>\n      </div>\n\n      <div className=\"mt-4 flex items-start gap-2 text-sm text-gray-500 bg-gray-100 p-3 rounded-lg\">\n        <AlertCircle className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n        <p>\n          Make sure your file has a header row with column names. First row will\n          be used as column headers.\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/ColumnMapper.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Settings, Check, AlertCircle, Wand2 } from \"lucide-react\";\nimport { ColumnMapping, DataRow, ReportTemplate } from \"@/types\";\nimport { autoMapColumns } from \"@/utils/dataParser\";\n\ninterface ColumnMapperProps {\n  columns: string[];\n  template: ReportTemplate;\n  onMappingComplete: (mappings: ColumnMapping[]) => void;\n  data: DataRow[];\n}\n\nconst DATA_TYPES = [\n  { value: \"string\", label: \"Text\" },\n  { value: \"number\", label: \"Number\" },\n  { value: \"date\", label: \"Date\" },\n  { value: \"currency\", label: \"Currency\" },\n];\n\nexport default function ColumnMapper({\n  columns,\n  template,\n  onMappingComplete,\n  data,\n}: ColumnMapperProps) {\n  const [mappings, setMappings] = useState<ColumnMapping[]>([]);\n  const [autoMapped, setAutoMapped] = useState(false);\n\n  useEffect(() => {\n    // Auto-map on initial load\n    if (columns.length > 0 && mappings.length === 0 && !autoMapped) {\n      handleAutoMap();\n    }\n  }, [columns]);\n\n  const handleAutoMap = () => {\n    const autoMappings = autoMapColumns(columns, [\n      ...template.requiredFields,\n      ...template.optionalFields,\n    ]);\n    setMappings(autoMappings);\n    setAutoMapped(true);\n\n    if (autoMappings.length > 0) {\n      onMappingComplete(autoMappings);\n    }\n  };\n\n  const handleMappingChange = (\n    index: number,\n    field: keyof ColumnMapping,\n    value: string,\n  ) => {\n    const newMappings = [...mappings];\n    newMappings[index] = {\n      ...newMappings[index],\n      [field]: value,\n    };\n    setMappings(newMappings);\n    onMappingComplete(newMappings);\n  };\n\n  const addMapping = () => {\n    const newMapping: ColumnMapping = {\n      sourceColumn: columns[0] || \"\",\n      targetField: \"\",\n      dataType: \"string\",\n    };\n    const newMappings = [...mappings, newMapping];\n    setMappings(newMappings);\n  };\n\n  const removeMapping = (index: number) => {\n    const newMappings = mappings.filter((_, i) => i !== index);\n    setMappings(newMappings);\n    onMappingComplete(newMappings);\n  };\n\n  const getFieldStatus = (fieldName: string) => {\n    const isRequired = template.requiredFields.includes(fieldName);\n    const isOptional = template.optionalFields.includes(fieldName);\n    const isMapped = mappings.some((m) => m.targetField === fieldName);\n\n    if (isRequired) {\n      return { status: isMapped ? \"mapped\" : \"missing\", label: \"Required\" };\n    } else if (isOptional) {\n      return { status: isMapped ? \"mapped\" : \"optional\", label: \"Optional\" };\n    }\n    return { status: \"custom\", label: \"Custom\" };\n  };\n\n  const allRequiredFieldsMapped = template.requiredFields.every((field) =>\n    mappings.some((m) => m.targetField === field),\n  );\n\n  const previewValue = (sourceColumn: string) => {\n    if (data.length === 0 || !sourceColumn) return \"\";\n    const value = data[0][sourceColumn];\n    return value !== undefined ? String(value).substring(0, 30) : \"\";\n  };\n\n  return (\n    <div className=\"w-full space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Settings className=\"w-5 h-5 text-gray-600\" />\n          <h3 className=\"text-lg font-semibold\">Column Mapping</h3>\n        </div>\n        <button\n          onClick={handleAutoMap}\n          className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\n        >\n          <Wand2 className=\"w-4 h-4\" />\n          Auto-Map Columns\n        </button>\n      </div>\n\n      <p className=\"text-sm text-gray-600\">\n        Map your file columns to the required fields for the {template.name}{\" \"}\n        template.\n      </p>\n\n      {/* Field Status */}\n      <div className=\"flex flex-wrap gap-2\">\n        {template.requiredFields.map((field) => {\n          const { status } = getFieldStatus(field);\n          return (\n            <span\n              key={field}\n              className={`px-3 py-1 text-xs font-medium rounded-full ${\n                status === \"mapped\"\n                  ? \"bg-green-100 text-green-700\"\n                  : \"bg-red-100 text-red-700\"\n              }`}\n            >\n              {status === \"mapped\" ? (\n                <Check className=\"w-3 h-3 inline mr-1\" />\n              ) : (\n                <AlertCircle className=\"w-3 h-3 inline mr-1\" />\n              )}\n              {field}\n            </span>\n          );\n        })}\n        {template.optionalFields.map((field) => {\n          const { status } = getFieldStatus(field);\n          if (status !== \"mapped\") return null;\n          return (\n            <span\n              key={field}\n              className=\"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700\"\n            >\n              <Check className=\"w-3 h-3 inline mr-1\" />\n              {field}\n            </span>\n          );\n        })}\n      </div>\n\n      {/* Mapping Table */}\n      <div className=\"border rounded-lg overflow-hidden\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-3 text-left font-medium text-gray-700\">\n                Source Column\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-gray-700\">\n                Target Field\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-gray-700\">\n                Data Type\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-gray-700\">\n                Preview\n              </th>\n              <th className=\"px-4 py-3 text-center font-medium text-gray-700\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y\">\n            {mappings.map((mapping, index) => (\n              <tr key={index} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-3\">\n                  <select\n                    value={mapping.sourceColumn}\n                    onChange={(e) =>\n                      handleMappingChange(index, \"sourceColumn\", e.target.value)\n                    }\n                    className=\"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    {columns.map((col) => (\n                      <option key={col} value={col}>\n                        {col}\n                      </option>\n                    ))}\n                  </select>\n                </td>\n                <td className=\"px-4 py-3\">\n                  <input\n                    type=\"text\"\n                    value={mapping.targetField}\n                    onChange={(e) =>\n                      handleMappingChange(index, \"targetField\", e.target.value)\n                    }\n                    placeholder=\"Field name\"\n                    className=\"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    list=\"target-fields\"\n                  />\n                  <datalist id=\"target-fields\">\n                    {[\n                      ...template.requiredFields,\n                      ...template.optionalFields,\n                    ].map((field) => (\n                      <option key={field} value={field} />\n                    ))}\n                  </datalist>\n                </td>\n                <td className=\"px-4 py-3\">\n                  <select\n                    value={mapping.dataType}\n                    onChange={(e) =>\n                      handleMappingChange(index, \"dataType\", e.target.value)\n                    }\n                    className=\"w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    {DATA_TYPES.map((type) => (\n                      <option key={type.value} value={type.value}>\n                        {type.label}\n                      </option>\n                    ))}\n                  </select>\n                </td>\n                <td className=\"px-4 py-3 text-gray-500 text-xs\">\n                  {previewValue(mapping.sourceColumn)}\n                </td>\n                <td className=\"px-4 py-3 text-center\">\n                  <button\n                    onClick={() => removeMapping(index)}\n                    className=\"text-red-500 hover:text-red-700 font-medium\"\n                  >\n                    Remove\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Add Mapping Button */}\n      <button\n        onClick={addMapping}\n        className=\"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 font-medium hover:border-gray-400 hover:text-gray-700 transition-colors\"\n      >\n        + Add Column Mapping\n      </button>\n\n      {/* Validation Message */}\n      {!allRequiredFieldsMapped && (\n        <div className=\"flex items-start gap-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n          <AlertCircle className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"font-medium text-yellow-800\">\n              Required fields not mapped\n            </p>\n            <p className=\"text-sm text-yellow-700\">\n              Please map all required fields:{\" \"}\n              {template.requiredFields\n                .filter((f) => !mappings.some((m) => m.targetField === f))\n                .join(\", \")}\n            </p>\n          </div>\n        </div>\n      )}\n\n      {allRequiredFieldsMapped && (\n        <div className=\"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800\">\n          <Check className=\"w-5 h-5\" />\n          <span className=\"font-medium\">All required fields are mapped!</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/utils/export.ts"],"sourcesContent":["import jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport * as XLSX from \"xlsx\";\nimport { ProcessedData, ReportConfig, DataRow, ColumnMapping } from \"@/types\";\n\nexport function exportToPDF(\n  processedData: ProcessedData,\n  config: ReportConfig,\n): void {\n  const doc = new jsPDF();\n  const { rawData, mappings, summary } = processedData;\n\n  // Title\n  doc.setFontSize(20);\n  doc.text(config.title, 14, 20);\n\n  // Period\n  doc.setFontSize(12);\n  doc.text(`Period: ${config.period || summary.period || \"N/A\"}`, 14, 30);\n\n  // Summary section\n  doc.setFontSize(14);\n  doc.text(\"Summary\", 14, 45);\n\n  doc.setFontSize(10);\n  let yPos = 55;\n  doc.text(`Total Records: ${summary.totalRows}`, 14, yPos);\n  yPos += 6;\n\n  if (summary.totalAmount !== undefined) {\n    doc.text(`Total Amount: ${formatCurrency(summary.totalAmount)}`, 14, yPos);\n    yPos += 6;\n  }\n\n  if (summary.averageAmount !== undefined) {\n    doc.text(\n      `Average Amount: ${formatCurrency(summary.averageAmount)}`,\n      14,\n      yPos,\n    );\n    yPos += 6;\n  }\n\n  // Table data\n  const tableHeaders = mappings.map((m) => m.targetField);\n  const tableData = rawData.map((row) =>\n    mappings.map((m) => formatValue(row[m.sourceColumn], m.dataType)),\n  );\n\n  // Generate table\n  autoTable(doc, {\n    head: [tableHeaders],\n    body: tableData,\n    startY: yPos + 10,\n    styles: { fontSize: 8, cellPadding: 2 },\n    headStyles: { fillColor: [41, 128, 185], textColor: 255 },\n    alternateRowStyles: { fillColor: [245, 245, 245] },\n  });\n\n  // Category breakdown if available\n  if (summary.categories && Object.keys(summary.categories).length > 0) {\n    const finalY =\n      (doc as unknown as { lastAutoTable: { finalY: number } }).lastAutoTable\n        ?.finalY || 150;\n\n    doc.setFontSize(14);\n    doc.text(\"Category Breakdown\", 14, finalY + 15);\n\n    const categoryData = Object.entries(summary.categories).map(\n      ([category, count]) => [category, count.toString()],\n    );\n\n    autoTable(doc, {\n      head: [[\"Category\", \"Count\"]],\n      body: categoryData,\n      startY: finalY + 20,\n      styles: { fontSize: 10 },\n      headStyles: { fillColor: [41, 128, 185], textColor: 255 },\n    });\n  }\n\n  // Footer\n  const pageCount = doc.getNumberOfPages();\n  for (let i = 1; i <= pageCount; i++) {\n    doc.setPage(i);\n    doc.setFontSize(8);\n    doc.text(\n      `Generated on ${new Date().toLocaleString()} - Page ${i} of ${pageCount}`,\n      14,\n      doc.internal.pageSize.height - 10,\n    );\n  }\n\n  // Download\n  doc.save(\n    `${config.title.replace(/\\s+/g, \"_\")}_${new Date().toISOString().split(\"T\")[0]}.pdf`,\n  );\n}\n\nexport function exportToExcel(\n  processedData: ProcessedData,\n  config: ReportConfig,\n): void {\n  const { rawData, mappings, summary } = processedData;\n\n  // Create workbook\n  const wb = XLSX.utils.book_new();\n\n  // Main data sheet\n  const mappedData = rawData.map((row) => {\n    const mappedRow: DataRow = {};\n    mappings.forEach((m) => {\n      mappedRow[m.targetField] = row[m.sourceColumn];\n    });\n    return mappedRow;\n  });\n\n  const ws = XLSX.utils.json_to_sheet(mappedData);\n  XLSX.utils.book_append_sheet(wb, ws, \"Data\");\n\n  // Summary sheet\n  const summaryData = [\n    [\"Report Title\", config.title],\n    [\"Period\", config.period || summary.period || \"N/A\"],\n    [\"Total Records\", summary.totalRows],\n    [\"Total Amount\", summary.totalAmount || \"N/A\"],\n    [\"Average Amount\", summary.averageAmount || \"N/A\"],\n    [\"\"],\n    [\"Category Breakdown\"],\n    [\"Category\", \"Count\"],\n    ...Object.entries(summary.categories || {}),\n  ];\n\n  const summaryWs = XLSX.utils.aoa_to_sheet(summaryData);\n  XLSX.utils.book_append_sheet(wb, summaryWs, \"Summary\");\n\n  // Download\n  XLSX.writeFile(\n    wb,\n    `${config.title.replace(/\\s+/g, \"_\")}_${new Date().toISOString().split(\"T\")[0]}.xlsx`,\n  );\n}\n\nfunction formatValue(value: unknown, dataType: string): string {\n  if (value === undefined || value === null || value === \"\") {\n    return \"-\";\n  }\n\n  switch (dataType) {\n    case \"currency\":\n      return formatCurrency(Number(value));\n    case \"date\":\n      const date = new Date(String(value));\n      return isNaN(date.getTime()) ? String(value) : date.toLocaleDateString();\n    case \"number\":\n      return Number(value).toLocaleString();\n    default:\n      return String(value);\n  }\n}\n\nfunction formatCurrency(value: number): string {\n  return new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(value);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/ReportViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n  FileText,\n  Download,\n  Printer,\n  ChevronDown,\n  ChevronUp,\n  AlertTriangle,\n} from \"lucide-react\";\nimport { ProcessedData, ReportConfig, ReportTemplate } from \"@/types\";\nimport { exportToPDF, exportToExcel } from \"@/utils/export\";\n\ninterface ReportViewerProps {\n  processedData: ProcessedData;\n  config: ReportConfig;\n  template: ReportTemplate;\n  onExport?: (format: \"pdf\" | \"excel\") => void;\n}\n\nexport default function ReportViewer({\n  processedData,\n  config,\n  template,\n  onExport,\n}: ReportViewerProps) {\n  const [showPreview, setShowPreview] = useState(true);\n  const [isExporting, setIsExporting] = useState(false);\n  const { rawData, mappings, summary, errors } = processedData;\n\n  const handleExportPDF = async () => {\n    setIsExporting(true);\n    try {\n      exportToPDF(processedData, config);\n      onExport?.(\"pdf\");\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const handleExportExcel = async () => {\n    setIsExporting(true);\n    try {\n      exportToExcel(processedData, config);\n      onExport?.(\"excel\");\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const formatValue = (value: unknown, dataType: string): string => {\n    if (value === undefined || value === null || value === \"\") {\n      return \"-\";\n    }\n\n    switch (dataType) {\n      case \"currency\":\n        return new Intl.NumberFormat(\"id-ID\", {\n          style: \"currency\",\n          currency: \"IDR\",\n          minimumFractionDigits: 0,\n        }).format(Number(value));\n      case \"date\":\n        const date = new Date(String(value));\n        return isNaN(date.getTime())\n          ? String(value)\n          : date.toLocaleDateString(\"id-ID\");\n      case \"number\":\n        return Number(value).toLocaleString(\"id-ID\");\n      default:\n        return String(value);\n    }\n  };\n\n  const previewData = rawData.slice(0, 100); // Limit preview to 100 rows\n\n  return (\n    <div className=\"w-full space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <FileText className=\"w-5 h-5 text-gray-600\" />\n          <h3 className=\"text-lg font-semibold\">Report Preview</h3>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={handleExportPDF}\n            disabled={isExporting}\n            className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors\"\n          >\n            <Download className=\"w-4 h-4\" />\n            Export PDF\n          </button>\n          <button\n            onClick={handleExportExcel}\n            disabled={isExporting}\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors\"\n          >\n            <Download className=\"w-4 h-4\" />\n            Export Excel\n          </button>\n        </div>\n      </div>\n\n      {/* Report Info */}\n      <div className=\"bg-gray-50 p-4 rounded-lg\">\n        <h4 className=\"font-semibold text-gray-900\">{config.title}</h4>\n        <p className=\"text-sm text-gray-600\">Template: {template.name}</p>\n        <p className=\"text-sm text-gray-600\">\n          Period: {config.period || summary.period || \"N/A\"}\n        </p>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"bg-blue-50 p-4 rounded-lg\">\n          <p className=\"text-sm text-blue-600 font-medium\">Total Records</p>\n          <p className=\"text-2xl font-bold text-blue-900\">\n            {summary.totalRows.toLocaleString()}\n          </p>\n        </div>\n        {summary.totalAmount !== undefined && (\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <p className=\"text-sm text-green-600 font-medium\">Total Amount</p>\n            <p className=\"text-2xl font-bold text-green-900\">\n              {new Intl.NumberFormat(\"id-ID\", {\n                style: \"currency\",\n                currency: \"IDR\",\n                minimumFractionDigits: 0,\n              }).format(summary.totalAmount)}\n            </p>\n          </div>\n        )}\n        {summary.averageAmount !== undefined && (\n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <p className=\"text-sm text-purple-600 font-medium\">\n              Average Amount\n            </p>\n            <p className=\"text-2xl font-bold text-purple-900\">\n              {new Intl.NumberFormat(\"id-ID\", {\n                style: \"currency\",\n                currency: \"IDR\",\n                minimumFractionDigits: 0,\n              }).format(summary.averageAmount)}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Validation Errors */}\n      {errors.length > 0 && (\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-2\">\n            <AlertTriangle className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"font-medium text-yellow-800\">\n                {errors.length} validation error{errors.length > 1 ? \"s\" : \"\"}{\" \"}\n                found\n              </p>\n              <p className=\"text-sm text-yellow-700 mt-1\">\n                Some data may need correction. Review the errors before\n                exporting.\n              </p>\n              <ul className=\"mt-2 space-y-1 text-sm text-yellow-700\">\n                {errors.slice(0, 5).map((error, index) => (\n                  <li key={index}>\n                    Row {error.row}, Column \"{error.column}\": {error.message}\n                  </li>\n                ))}\n                {errors.length > 5 && (\n                  <li>... and {errors.length - 5} more errors</li>\n                )}\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Data Preview */}\n      <div className=\"border rounded-lg overflow-hidden\">\n        <button\n          onClick={() => setShowPreview(!showPreview)}\n          className=\"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors\"\n        >\n          <span className=\"font-medium\">\n            Data Preview ({previewData.length} of {rawData.length} rows)\n          </span>\n          {showPreview ? (\n            <ChevronUp className=\"w-5 h-5 text-gray-500\" />\n          ) : (\n            <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n          )}\n        </button>\n\n        {showPreview && (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"bg-gray-100 border-b\">\n                <tr>\n                  {mappings.map((mapping, index) => (\n                    <th\n                      key={index}\n                      className=\"px-4 py-3 text-left font-medium text-gray-700 whitespace-nowrap\"\n                    >\n                      {mapping.targetField}\n                      <span className=\"block text-xs text-gray-500 font-normal\">\n                        ({mapping.sourceColumn})\n                      </span>\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody className=\"divide-y\">\n                {previewData.map((row, rowIndex) => (\n                  <tr key={rowIndex} className=\"hover:bg-gray-50\">\n                    {mappings.map((mapping, colIndex) => (\n                      <td\n                        key={colIndex}\n                        className=\"px-4 py-3 text-gray-700 whitespace-nowrap\"\n                      >\n                        {formatValue(\n                          row[mapping.sourceColumn],\n                          mapping.dataType,\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Category Breakdown */}\n      {summary.categories && Object.keys(summary.categories).length > 0 && (\n        <div className=\"border rounded-lg p-4\">\n          <h4 className=\"font-semibold mb-4\">Category Breakdown</h4>\n          <div className=\"space-y-2\">\n            {Object.entries(summary.categories)\n              .sort(([, a], [, b]) => b - a)\n              .map(([category, count]) => (\n                <div\n                  key={category}\n                  className=\"flex items-center justify-between\"\n                >\n                  <span className=\"text-gray-700\">{category}</span>\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-32 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full bg-blue-500 rounded-full\"\n                        style={{\n                          width: `${(count / summary.totalRows) * 100}%`,\n                        }}\n                      />\n                    </div>\n                    <span className=\"text-sm font-medium text-gray-900 w-12 text-right\">\n                      {count}\n                    </span>\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1865, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/ReportHistoryViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  History,\n  Download,\n  Trash2,\n  FileText,\n  Calendar,\n  Database,\n} from \"lucide-react\";\nimport { ReportHistory } from \"@/types\";\nimport {\n  getReportHistory,\n  deleteReportFromHistory,\n  clearReportHistory,\n} from \"@/utils/storage\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { exportToPDF, exportToExcel } from \"@/utils/export\";\nimport { ProcessedData } from \"@/types\";\n\nexport default function ReportHistoryViewer() {\n  const { user } = useAuth();\n  const [history, setHistory] = useState<ReportHistory[]>([]);\n  const [filter, setFilter] = useState(\"\");\n\n  useEffect(() => {\n    if (user) {\n      loadHistory();\n    }\n  }, [user]);\n\n  const loadHistory = () => {\n    const reports = getReportHistory(user?.id);\n    setHistory(reports);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm(\"Delete this report from history?\")) {\n      deleteReportFromHistory(id);\n      loadHistory();\n    }\n  };\n\n  const handleClearAll = () => {\n    if (confirm(\"Clear all report history? This cannot be undone.\")) {\n      clearReportHistory(user?.id);\n      loadHistory();\n    }\n  };\n\n  const handleReExport = (report: ReportHistory, format: \"pdf\" | \"excel\") => {\n    // Recreate processed data from stored info\n    const processedData: ProcessedData = {\n      rawData: [], // We don't store raw data for privacy\n      columns: report.mappings.map((m) => m.sourceColumn),\n      mappings: report.mappings,\n      summary: report.summary,\n      errors: [],\n    };\n\n    if (format === \"pdf\") {\n      exportToPDF(processedData, report.config);\n    } else {\n      exportToExcel(processedData, report.config);\n    }\n  };\n\n  const filteredHistory = history.filter(\n    (report) =>\n      report.title.toLowerCase().includes(filter.toLowerCase()) ||\n      report.templateName.toLowerCase().includes(filter.toLowerCase()),\n  );\n\n  return (\n    <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-2\">\n          <History className=\"w-5 h-5 text-muted-foreground\" />\n          <h3 className=\"text-lg font-semibold text-foreground\">\n            Report History\n          </h3>\n        </div>\n        {history.length > 0 && (\n          <button\n            onClick={handleClearAll}\n            className=\"flex items-center gap-2 px-3 py-1.5 text-destructive hover:bg-destructive/10 rounded-lg transition-colors text-sm\"\n          >\n            <Trash2 className=\"w-4 h-4\" />\n            Clear All\n          </button>\n        )}\n      </div>\n\n      <input\n        type=\"text\"\n        placeholder=\"Search reports...\"\n        value={filter}\n        onChange={(e) => setFilter(e.target.value)}\n        className=\"w-full px-4 py-2 bg-background border border-input rounded-lg mb-4 focus:ring-2 focus:ring-ring focus:border-ring text-foreground placeholder:text-muted-foreground\"\n      />\n\n      {filteredHistory.length === 0 ? (\n        <div className=\"text-center py-8 text-muted-foreground\">\n          <FileText className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground/50\" />\n          <p>No reports in history yet</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {filteredHistory.map((report) => (\n            <div\n              key={report.id}\n              className=\"border border-border rounded-lg p-4 hover:bg-muted transition-colors bg-card\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-card-foreground\">\n                    {report.title}\n                  </h4>\n                  <div className=\"flex items-center gap-4 mt-1 text-sm text-muted-foreground\">\n                    <span className=\"flex items-center gap-1\">\n                      <Calendar className=\"w-3 h-3\" />\n                      {new Date(report.exportedAt).toLocaleString()}\n                    </span>\n                    <span className=\"flex items-center gap-1\">\n                      <Database className=\"w-3 h-3\" />\n                      {report.totalRows} rows\n                    </span>\n                    {report.totalAmount && (\n                      <span className=\"text-foreground\">\n                        Total:{\" \"}\n                        {new Intl.NumberFormat(\"id-ID\", {\n                          style: \"currency\",\n                          currency: \"IDR\",\n                          minimumFractionDigits: 0,\n                        }).format(report.totalAmount)}\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    Template: {report.templateName}\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-2 ml-4\">\n                  <button\n                    onClick={() => handleReExport(report, \"pdf\")}\n                    className=\"px-3 py-1.5 text-sm bg-destructive/10 text-destructive rounded hover:bg-destructive/20 transition-colors\"\n                  >\n                    <Download className=\"w-3 h-3 inline mr-1\" />\n                    PDF\n                  </button>\n                  <button\n                    onClick={() => handleReExport(report, \"excel\")}\n                    className=\"px-3 py-1.5 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors\"\n                  >\n                    <Download className=\"w-3 h-3 inline mr-1\" />\n                    Excel\n                  </button>\n                  <button\n                    onClick={() => handleDelete(report.id)}\n                    className=\"p-1.5 text-muted-foreground hover:text-destructive transition-colors\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2199, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/BackupRestore.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef } from \"react\";\nimport {\n  Download,\n  Upload,\n  Database,\n  Trash2,\n  AlertCircle,\n  Check,\n} from \"lucide-react\";\nimport {\n  exportAllData,\n  importAllData,\n  clearAllData,\n  getSettings,\n  saveSettings,\n} from \"@/utils/storage\";\n\nexport default function BackupRestore() {\n  const [message, setMessage] = useState<{\n    type: \"success\" | \"error\";\n    text: string;\n  } | null>(null);\n  const [settings, setSettings] = useState(getSettings());\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleExport = () => {\n    const data = exportAllData();\n    const blob = new Blob([data], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `autoreport-backup-${new Date().toISOString().split(\"T\")[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n\n    setMessage({ type: \"success\", text: \"Backup exported successfully!\" });\n    setTimeout(() => setMessage(null), 3000);\n  };\n\n  const handleImport = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const content = event.target?.result as string;\n      if (importAllData(content)) {\n        setMessage({\n          type: \"success\",\n          text: \"Data restored successfully! Please refresh the page.\",\n        });\n      } else {\n        setMessage({\n          type: \"error\",\n          text: \"Failed to restore data. Invalid backup file.\",\n        });\n      }\n      setTimeout(() => setMessage(null), 5000);\n    };\n    reader.readAsText(file);\n    e.target.value = \"\"; // Reset input\n  };\n\n  const handleClearAll = () => {\n    if (\n      confirm(\n        \"WARNING: This will delete ALL data including users, mappings, and report history. Are you sure?\",\n      )\n    ) {\n      clearAllData();\n      setMessage({\n        type: \"success\",\n        text: \"All data cleared. Please refresh the page.\",\n      });\n      setTimeout(() => setMessage(null), 5000);\n    }\n  };\n\n  const handleSettingChange = (\n    key: keyof typeof settings,\n    value: boolean | string,\n  ) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    saveSettings(newSettings);\n  };\n\n  return (\n    <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n      <div className=\"flex items-center gap-2 mb-6\">\n        <Database className=\"w-5 h-5 text-muted-foreground\" />\n        <h3 className=\"text-lg font-semibold text-foreground\">\n          Data Management\n        </h3>\n      </div>\n\n      {message && (\n        <div\n          className={`mb-6 p-4 rounded-lg flex items-center gap-2 ${\n            message.type === \"success\"\n              ? \"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400\"\n              : \"bg-destructive/10 text-destructive\"\n          }`}\n        >\n          {message.type === \"success\" ? (\n            <Check className=\"w-5 h-5\" />\n          ) : (\n            <AlertCircle className=\"w-5 h-5\" />\n          )}\n          {message.text}\n        </div>\n      )}\n\n      {/* Settings */}\n      <div className=\"mb-6 p-4 bg-muted rounded-lg border border-border\">\n        <h4 className=\"font-medium text-foreground mb-4\">Settings</h4>\n        <div className=\"space-y-3\">\n          <label className=\"flex items-center gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={settings.deleteAfterExport}\n              onChange={(e) =>\n                handleSettingChange(\"deleteAfterExport\", e.target.checked)\n              }\n              className=\"w-4 h-4 text-primary rounded focus:ring-ring border-border\"\n            />\n            <span className=\"text-sm text-foreground\">\n              Delete uploaded data after export (for privacy)\n            </span>\n          </label>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm text-foreground\">\n              Default Period View:\n            </span>\n            <select\n              value={settings.defaultPeriod}\n              onChange={(e) =>\n                handleSettingChange(\"defaultPeriod\", e.target.value)\n              }\n              className=\"px-3 py-1 bg-background border border-input rounded text-sm text-foreground focus:ring-2 focus:ring-ring focus:border-ring\"\n            >\n              <option value=\"daily\">Daily</option>\n              <option value=\"weekly\">Weekly</option>\n              <option value=\"monthly\">Monthly</option>\n              <option value=\"yearly\">Yearly</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Backup & Restore */}\n      <div className=\"space-y-4\">\n        <h4 className=\"font-medium text-foreground\">Backup & Restore</h4>\n\n        <div className=\"flex flex-wrap gap-3\">\n          <button\n            onClick={handleExport}\n            className=\"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors\"\n          >\n            <Download className=\"w-4 h-4\" />\n            Export Backup\n          </button>\n\n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 transition-colors\"\n          >\n            <Upload className=\"w-4 h-4\" />\n            Import Backup\n          </button>\n\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".json\"\n            onChange={handleImport}\n            className=\"hidden\"\n          />\n        </div>\n\n        <div className=\"p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n          <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n            <strong>Tip:</strong> Regularly export backups to prevent data loss.\n            Backup includes users, saved mappings, and report history.\n          </p>\n        </div>\n      </div>\n\n      {/* Danger Zone */}\n      <div className=\"mt-8 pt-6 border-t border-border\">\n        <h4 className=\"font-medium text-destructive mb-4\">Danger Zone</h4>\n        <button\n          onClick={handleClearAll}\n          className=\"flex items-center gap-2 px-4 py-2 border-2 border-destructive/30 text-destructive rounded-lg hover:bg-destructive/10 transition-colors\"\n        >\n          <Trash2 className=\"w-4 h-4\" />\n          Clear All Data\n        </button>\n        <p className=\"text-sm text-muted-foreground mt-2\">\n          This will permanently delete all users, mappings, and report history.\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2596, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/UserManagement.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { Users, Plus, Trash2, Shield, User as UserIcon, X } from \"lucide-react\";\nimport { User, UserRole } from \"@/types\";\nimport { getUsers, addUser, deleteUser } from \"@/utils/storage\";\n\nexport default function UserManagement() {\n  const [users, setUsers] = useState<User[]>(getUsers());\n  const [isAdding, setIsAdding] = useState(false);\n  const [newUser, setNewUser] = useState({\n    username: \"\",\n    name: \"\",\n    role: \"user\" as UserRole,\n  });\n\n  const handleAddUser = () => {\n    if (!newUser.username || !newUser.name) return;\n\n    const user = addUser(newUser);\n    setUsers([...users, user]);\n    setIsAdding(false);\n    setNewUser({ username: \"\", name: \"\", role: \"user\" });\n  };\n\n  const handleDeleteUser = (id: string) => {\n    if (confirm(\"Are you sure you want to delete this user?\")) {\n      deleteUser(id);\n      setUsers(users.filter((u) => u.id !== id));\n    }\n  };\n\n  return (\n    <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-5 h-5 text-muted-foreground\" />\n          <h3 className=\"text-lg font-semibold text-foreground\">\n            User Management\n          </h3>\n        </div>\n        <button\n          onClick={() => setIsAdding(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Add User\n        </button>\n      </div>\n\n      {isAdding && (\n        <div className=\"mb-6 p-4 bg-muted rounded-lg border border-border\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"font-medium text-foreground\">Add New User</h4>\n            <button\n              onClick={() => setIsAdding(false)}\n              className=\"text-muted-foreground hover:text-foreground transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              value={newUser.username}\n              onChange={(e) =>\n                setNewUser({ ...newUser, username: e.target.value })\n              }\n              className=\"px-3 py-2 bg-background border border-input rounded-lg focus:ring-2 focus:ring-ring focus:border-ring text-foreground placeholder:text-muted-foreground\"\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Full Name\"\n              value={newUser.name}\n              onChange={(e) => setNewUser({ ...newUser, name: e.target.value })}\n              className=\"px-3 py-2 bg-background border border-input rounded-lg focus:ring-2 focus:ring-ring focus:border-ring text-foreground placeholder:text-muted-foreground\"\n            />\n            <select\n              value={newUser.role}\n              onChange={(e) =>\n                setNewUser({ ...newUser, role: e.target.value as UserRole })\n              }\n              className=\"px-3 py-2 bg-background border border-input rounded-lg focus:ring-2 focus:ring-ring focus:border-ring text-foreground\"\n            >\n              <option value=\"user\">User</option>\n              <option value=\"admin\">Admin</option>\n            </select>\n          </div>\n          <p className=\"text-sm text-muted-foreground mt-2\">\n            Password will be:{\" \"}\n            <span className=\"font-mono text-foreground\">\n              {newUser.username}123\n            </span>\n          </p>\n          <button\n            onClick={handleAddUser}\n            disabled={!newUser.username || !newUser.name}\n            className=\"mt-4 px-4 py-2 bg-green-600 dark:bg-green-700 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600 disabled:opacity-50 transition-colors\"\n          >\n            Create User\n          </button>\n        </div>\n      )}\n\n      <div className=\"overflow-x-auto border border-border rounded-lg\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-muted\">\n            <tr>\n              <th className=\"px-4 py-3 text-left font-medium text-foreground\">\n                Name\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-foreground\">\n                Username\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-foreground\">\n                Role\n              </th>\n              <th className=\"px-4 py-3 text-left font-medium text-foreground\">\n                Created\n              </th>\n              <th className=\"px-4 py-3 text-center font-medium text-foreground\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-border bg-background\">\n            {users.map((user) => (\n              <tr key={user.id} className=\"hover:bg-muted/50 transition-colors\">\n                <td className=\"px-4 py-3\">\n                  <div className=\"flex items-center gap-2 text-foreground\">\n                    <UserIcon className=\"w-4 h-4 text-muted-foreground\" />\n                    {user.name}\n                  </div>\n                </td>\n                <td className=\"px-4 py-3 text-muted-foreground\">\n                  {user.username}\n                </td>\n                <td className=\"px-4 py-3\">\n                  <span\n                    className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${\n                      user.role === \"admin\"\n                        ? \"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400\"\n                        : \"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400\"\n                    }`}\n                  >\n                    {user.role === \"admin\" ? (\n                      <Shield className=\"w-3 h-3\" />\n                    ) : (\n                      <UserIcon className=\"w-3 h-3\" />\n                    )}\n                    {user.role}\n                  </span>\n                </td>\n                <td className=\"px-4 py-3 text-muted-foreground\">\n                  {new Date(user.createdAt).toLocaleDateString()}\n                </td>\n                <td className=\"px-4 py-3 text-center\">\n                  <button\n                    onClick={() => handleDeleteUser(user.id)}\n                    className=\"text-destructive/70 hover:text-destructive transition-colors\"\n                    title=\"Delete user\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3027, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/SavedMappings.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Save, FolderOpen, Trash2, Check, AlertCircle } from \"lucide-react\";\nimport { SavedMapping, ColumnMapping, ReportTemplate } from \"@/types\";\nimport { getSavedMappings, saveMapping, deleteMapping } from \"@/utils/storage\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface SavedMappingsProps {\n  template: ReportTemplate;\n  currentMappings: ColumnMapping[];\n  onLoadMapping: (mappings: ColumnMapping[]) => void;\n}\n\nexport default function SavedMappings({\n  template,\n  currentMappings,\n  onLoadMapping,\n}: SavedMappingsProps) {\n  const { user } = useAuth();\n  const [mappings, setMappings] = useState<SavedMapping[]>([]);\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\n  const [mappingName, setMappingName] = useState(\"\");\n  const [message, setMessage] = useState<{\n    type: \"success\" | \"error\";\n    text: string;\n  } | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      loadMappings();\n    }\n  }, [user, template.id]);\n\n  const loadMappings = () => {\n    const allMappings = getSavedMappings(user?.id);\n    const templateMappings = allMappings.filter(\n      (m) => m.templateId === template.id,\n    );\n    setMappings(templateMappings);\n  };\n\n  const handleSaveMapping = () => {\n    if (!mappingName.trim() || !user) return;\n\n    saveMapping(\n      {\n        name: mappingName,\n        templateId: template.id,\n        mappings: currentMappings,\n      },\n      user.id,\n    );\n\n    setMessage({ type: \"success\", text: \"Mapping saved successfully!\" });\n    setShowSaveDialog(false);\n    setMappingName(\"\");\n    loadMappings();\n\n    setTimeout(() => setMessage(null), 3000);\n  };\n\n  const handleLoadMapping = (mapping: SavedMapping) => {\n    onLoadMapping(mapping.mappings);\n    setMessage({ type: \"success\", text: `Loaded mapping: ${mapping.name}` });\n    setTimeout(() => setMessage(null), 3000);\n  };\n\n  const handleDeleteMapping = (id: string) => {\n    if (confirm(\"Are you sure you want to delete this saved mapping?\")) {\n      deleteMapping(id);\n      loadMappings();\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {message && (\n        <div\n          className={`p-3 rounded-lg flex items-center gap-2 ${\n            message.type === \"success\"\n              ? \"bg-green-50 text-green-700\"\n              : \"bg-red-50 text-red-700\"\n          }`}\n        >\n          {message.type === \"success\" ? (\n            <Check className=\"w-4 h-4\" />\n          ) : (\n            <AlertCircle className=\"w-4 h-4\" />\n          )}\n          {message.text}\n        </div>\n      )}\n\n      <div className=\"flex items-center gap-2\">\n        <button\n          onClick={() => setShowSaveDialog(true)}\n          disabled={currentMappings.length === 0}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\n        >\n          <Save className=\"w-4 h-4\" />\n          Save Current Mapping\n        </button>\n      </div>\n\n      {showSaveDialog && (\n        <div className=\"p-4 bg-gray-50 rounded-lg\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Mapping Name\n          </label>\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={mappingName}\n              onChange={(e) => setMappingName(e.target.value)}\n              placeholder=\"e.g., January 2024 Financial\"\n              className=\"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n            <button\n              onClick={handleSaveMapping}\n              disabled={!mappingName.trim()}\n              className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50\"\n            >\n              Save\n            </button>\n            <button\n              onClick={() => setShowSaveDialog(false)}\n              className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {mappings.length > 0 && (\n        <div className=\"border rounded-lg overflow-hidden\">\n          <div className=\"px-4 py-3 bg-gray-50 border-b\">\n            <div className=\"flex items-center gap-2\">\n              <FolderOpen className=\"w-4 h-4 text-gray-600\" />\n              <span className=\"font-medium\">\n                Saved Mappings for {template.name}\n              </span>\n            </div>\n          </div>\n          <div className=\"divide-y\">\n            {mappings.map((mapping) => (\n              <div\n                key={mapping.id}\n                className=\"px-4 py-3 flex items-center justify-between hover:bg-gray-50\"\n              >\n                <div>\n                  <p className=\"font-medium text-gray-900\">{mapping.name}</p>\n                  <p className=\"text-sm text-gray-500\">\n                    {mapping.mappings.length} columns mapped {\" \"}\n                    {new Date(mapping.updatedAt).toLocaleDateString()}\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => handleLoadMapping(mapping)}\n                    className=\"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors\"\n                  >\n                    Load\n                  </button>\n                  <button\n                    onClick={() => handleDeleteMapping(mapping.id)}\n                    className=\"p-1 text-red-500 hover:text-red-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3335, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/LoginPage.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { LogIn, User, Lock, AlertCircle, BarChart3 } from \"lucide-react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nexport default function LoginPage() {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const { login } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n\n    const success = await login(username, password);\n    if (!success) {\n      setError(\n        \"Invalid username or password. Try: admin / admin123 or user / user123\",\n      );\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Logo & Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\n            <BarChart3 className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">AutoReport</h1>\n          <p className=\"text-gray-600 mt-1\">\n            Automated Reporting & Data Recap System\n          </p>\n        </div>\n\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-6 text-center\">\n            Sign In\n          </h2>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\">\n              <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Username\n              </label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                  placeholder=\"Enter username\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\n                  placeholder=\"Enter password\"\n                  required\n                />\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full flex items-center justify-center gap-2 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\n            >\n              {isLoading ? (\n                <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              ) : (\n                <>\n                  <LogIn className=\"w-5 h-5\" />\n                  Sign In\n                </>\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\n            <p className=\"text-sm text-gray-500 text-center mb-3\">\n              Demo Credentials\n            </p>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between p-2 bg-gray-50 rounded\">\n                <span className=\"text-gray-600\">Admin:</span>\n                <span className=\"font-medium text-gray-900\">\n                  admin / admin123\n                </span>\n              </div>\n              <div className=\"flex justify-between p-2 bg-gray-50 rounded\">\n                <span className=\"text-gray-600\">User:</span>\n                <span className=\"font-medium text-gray-900\">\n                  user / user123\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <p className=\"text-center text-sm text-gray-500 mt-8\">\n          Built for schools, offices, and SMEs\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sOAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,+JAAO;IAEzB,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,aAAa;QAEb,MAAM,UAAU,MAAM,MAAM,UAAU;QACtC,IAAI,CAAC,SAAS;YACZ,SACE;QAEJ;QAEA,aAAa;IACf;IAEA,qBACE,mQAAC;QAAI,WAAU;kBACb,cAAA,mQAAC;YAAI,WAAU;;8BAEb,mQAAC;oBAAI,WAAU;;sCACb,mQAAC;4BAAI,WAAU;sCACb,cAAA,mQAAC,oPAAS;gCAAC,WAAU;;;;;;;;;;;sCAEvB,mQAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,mQAAC;4BAAE,WAAU;sCAAqB;;;;;;;;;;;;8BAMpC,mQAAC;oBAAI,WAAU;;sCACb,mQAAC;4BAAG,WAAU;sCAAuD;;;;;;wBAIpE,uBACC,mQAAC;4BAAI,WAAU;;8CACb,mQAAC,wPAAW;oCAAC,WAAU;;;;;;8CACvB,mQAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;sCAIzC,mQAAC;4BAAK,UAAU;4BAAc,WAAU;;8CACtC,mQAAC;;sDACC,mQAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,mQAAC;4CAAI,WAAU;;8DACb,mQAAC,+NAAI;oDAAC,WAAU;;;;;;8DAChB,mQAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,WAAU;oDACV,aAAY;oDACZ,QAAQ;;;;;;;;;;;;;;;;;;8CAKd,mQAAC;;sDACC,mQAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,mQAAC;4CAAI,WAAU;;8DACb,mQAAC,+NAAI;oDAAC,WAAU;;;;;;8DAChB,mQAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,WAAU;oDACV,aAAY;oDACZ,QAAQ;;;;;;;;;;;;;;;;;;8CAKd,mQAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,0BACC,mQAAC;wCAAI,WAAU;;;;;6DAEf;;0DACE,mQAAC,sOAAK;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;sCAOrC,mQAAC;4BAAI,WAAU;;8CACb,mQAAC;oCAAE,WAAU;8CAAyC;;;;;;8CAGtD,mQAAC;oCAAI,WAAU;;sDACb,mQAAC;4CAAI,WAAU;;8DACb,mQAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,mQAAC;oDAAK,WAAU;8DAA4B;;;;;;;;;;;;sDAI9C,mQAAC;4CAAI,WAAU;;8DACb,mQAAC;oDAAK,WAAU;8DAAgB;;;;;;8DAChC,mQAAC;oDAAK,WAAU;8DAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BASpD,mQAAC;oBAAE,WAAU;8BAAyC;;;;;;;;;;;;;;;;;AAM9D"}},
    {"offset": {"line": 3678, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/types/index.ts"],"sourcesContent":["export interface DataRow {\n  [key: string]: string | number | Date;\n}\n\nexport interface ColumnMapping {\n  sourceColumn: string;\n  targetField: string;\n  dataType: \"string\" | \"number\" | \"date\" | \"currency\";\n}\n\nexport interface SavedMapping {\n  id: string;\n  name: string;\n  templateId: string;\n  mappings: ColumnMapping[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ReportTemplate {\n  id: string;\n  name: string;\n  description: string;\n  type: \"financial\" | \"attendance\" | \"inventory\";\n  requiredFields: string[];\n  optionalFields: string[];\n}\n\nexport interface ProcessedData {\n  rawData: DataRow[];\n  columns: string[];\n  mappings: ColumnMapping[];\n  summary: DataSummary;\n  errors: ValidationError[];\n}\n\nexport interface DataSummary {\n  totalRows: number;\n  totalAmount?: number;\n  averageAmount?: number;\n  period?: string;\n  categories?: { [key: string]: number };\n}\n\nexport interface ValidationError {\n  row: number;\n  column: string;\n  message: string;\n  value: unknown;\n}\n\nexport interface ReportConfig {\n  title: string;\n  period: string;\n  template: ReportTemplate;\n  includeCharts: boolean;\n  groupBy?: string;\n  deleteAfterExport?: boolean;\n}\n\nexport interface ReportHistory {\n  id: string;\n  title: string;\n  templateName: string;\n  period: string;\n  totalRows: number;\n  totalAmount?: number;\n  exportedAt: string;\n  exportedFormats: (\"pdf\" | \"excel\")[];\n  config: ReportConfig;\n  mappings: ColumnMapping[];\n  summary: DataSummary;\n}\n\nexport type UserRole = \"admin\" | \"user\";\n\nexport interface User {\n  id: string;\n  username: string;\n  name: string;\n  role: UserRole;\n  createdAt: string;\n}\n\nexport interface AuthState {\n  isAuthenticated: boolean;\n  user: User | null;\n}\n\nexport const REPORT_TEMPLATES: ReportTemplate[] = [\n  {\n    id: \"financial-summary\",\n    name: \"Financial Summary\",\n    description:\n      \"Generate financial reports with income, expenses, and balance calculations\",\n    type: \"financial\",\n    requiredFields: [\"date\", \"amount\", \"category\"],\n    optionalFields: [\"description\", \"reference\", \"notes\"],\n  },\n  {\n    id: \"attendance-report\",\n    name: \"Attendance Report\",\n    description: \"Track attendance records with summaries by person and date\",\n    type: \"attendance\",\n    requiredFields: [\"date\", \"name\", \"status\"],\n    optionalFields: [\"check_in\", \"check_out\", \"department\", \"notes\"],\n  },\n  {\n    id: \"inventory-report\",\n    name: \"Inventory Report\",\n    description: \"Monitor inventory levels, stock movements, and valuations\",\n    type: \"inventory\",\n    requiredFields: [\"item_name\", \"quantity\", \"unit_price\"],\n    optionalFields: [\"category\", \"sku\", \"location\", \"date\"],\n  },\n];\n"],"names":[],"mappings":";;;;AAyFO,MAAM,mBAAqC;IAChD;QACE,IAAI;QACJ,MAAM;QACN,aACE;QACF,MAAM;QACN,gBAAgB;YAAC;YAAQ;YAAU;SAAW;QAC9C,gBAAgB;YAAC;YAAe;YAAa;SAAQ;IACvD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,gBAAgB;YAAC;YAAQ;YAAQ;SAAS;QAC1C,gBAAgB;YAAC;YAAY;YAAa;YAAc;SAAQ;IAClE;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,MAAM;QACN,gBAAgB;YAAC;YAAa;YAAY;SAAa;QACvD,gBAAgB;YAAC;YAAY;YAAO;YAAY;SAAO;IACzD;CACD"}},
    {"offset": {"line": 3738, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,2LAAO,EAAC,IAAA,kKAAI,EAAC;AACtB"}},
    {"offset": {"line": 3753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,4LAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,6LAAI,GAAG;IAE9B,qBACE,mQAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,8IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 3816, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/components/mode-toggle.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\n\nimport { Button } from \"@/components/ui/button\";\n\nexport function ModeToggle() {\n  const { setTheme, theme, resolvedTheme } = useTheme();\n  const [mounted, setMounted] = React.useState(false);\n\n  React.useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const toggleTheme = () => {\n    const html = document.documentElement;\n    \n    if (resolvedTheme === \"light\") {\n      html.classList.remove(\"light\");\n      html.classList.add(\"dark\");\n      setTheme(\"dark\");\n    } else if (resolvedTheme === \"dark\") {\n      html.classList.remove(\"dark\");\n      html.classList.add(\"light\");\n      setTheme(\"light\");\n    }\n  };\n\n  // Prevent hydration mismatch\n  if (!mounted) {\n    return (\n      <Button variant=\"outline\" size=\"icon\" disabled>\n        <Sun className=\"h-[1.2rem] w-[1.2rem]\" />\n        <span className=\"sr-only\">Toggle theme</span>\n      </Button>\n    );\n  }\n\n  return (\n    <Button variant=\"outline\" size=\"icon\" onClick={toggleTheme}>\n      <Sun className=\"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n      <Moon className=\"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n      <span className=\"sr-only\">Toggle theme</span>\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAEA;AANA;;;;;;AAQO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG,IAAA,iLAAQ;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,sOAAc,CAAC;IAE7C,uOAAe,CAAC;QACd,WAAW;IACb,GAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,OAAO,SAAS,eAAe;QAErC,IAAI,kBAAkB,SAAS;YAC7B,KAAK,SAAS,CAAC,MAAM,CAAC;YACtB,KAAK,SAAS,CAAC,GAAG,CAAC;YACnB,SAAS;QACX,OAAO,IAAI,kBAAkB,QAAQ;YACnC,KAAK,SAAS,CAAC,MAAM,CAAC;YACtB,KAAK,SAAS,CAAC,GAAG,CAAC;YACnB,SAAS;QACX;IACF;IAEA,6BAA6B;IAC7B,IAAI,CAAC,SAAS;QACZ,qBACE,mQAAC,iKAAM;YAAC,SAAQ;YAAU,MAAK;YAAO,QAAQ;;8BAC5C,mQAAC,4NAAG;oBAAC,WAAU;;;;;;8BACf,mQAAC;oBAAK,WAAU;8BAAU;;;;;;;;;;;;IAGhC;IAEA,qBACE,mQAAC,iKAAM;QAAC,SAAQ;QAAU,MAAK;QAAO,SAAS;;0BAC7C,mQAAC,4NAAG;gBAAC,WAAU;;;;;;0BACf,mQAAC,+NAAI;gBAAC,WAAU;;;;;;0BAChB,mQAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC"}},
    {"offset": {"line": 3917, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ACER/Desktop/exdash/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport {\n  FileText,\n  Settings,\n  BarChart3,\n  ChevronRight,\n  CheckCircle2,\n  LogOut,\n  User,\n  Shield,\n  History,\n  Database,\n  Users,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport FileUpload from \"@/components/FileUpload\";\nimport ColumnMapper from \"@/components/ColumnMapper\";\nimport ReportViewer from \"@/components/ReportViewer\";\nimport ReportHistoryViewer from \"@/components/ReportHistoryViewer\";\nimport BackupRestore from \"@/components/BackupRestore\";\nimport UserManagement from \"@/components/UserManagement\";\nimport SavedMappings from \"@/components/SavedMappings\";\nimport LoginPage from \"@/components/LoginPage\";\nimport {\n  DataRow,\n  ColumnMapping,\n  ReportTemplate,\n  ProcessedData,\n  ReportConfig,\n  REPORT_TEMPLATES,\n} from \"@/types\";\nimport { processData } from \"@/utils/dataParser\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { addReportToHistory, getSettings } from \"@/utils/storage\";\nimport { ModeToggle } from \"@/components/mode-toggle\";\n\nconst TABS = [\n  { id: \"report\", label: \"New Report\", icon: FileText },\n  { id: \"history\", label: \"History\", icon: History },\n  { id: \"settings\", label: \"Settings\", icon: Database },\n  { id: \"admin\", label: \"Admin\", icon: Users, adminOnly: true },\n];\n\nconst STEPS = [\n  { id: \"upload\", label: \"Upload Data\", icon: FileText },\n  { id: \"map\", label: \"Map Columns\", icon: Settings },\n  { id: \"preview\", label: \"Preview & Export\", icon: BarChart3 },\n];\n\nexport default function Dashboard() {\n  const { isAuthenticated, user, isAdmin, logout } = useAuth();\n  const router = useRouter();\n  const [activeTab, setActiveTab] = useState(\"report\");\n  const [currentStep, setCurrentStep] = useState(0);\n  const [data, setData] = useState<DataRow[]>([]);\n  const [fileName, setFileName] = useState<string>(\"\");\n  const [selectedTemplate, setSelectedTemplate] = useState<ReportTemplate>(\n    REPORT_TEMPLATES[0],\n  );\n  const [mappings, setMappings] = useState<ColumnMapping[]>([]);\n  const [processedData, setProcessedData] = useState<ProcessedData | null>(\n    null,\n  );\n  const [reportConfig, setReportConfig] = useState<ReportConfig>({\n    title: \"\",\n    period: \"\",\n    template: REPORT_TEMPLATES[0],\n    includeCharts: false,\n    deleteAfterExport: getSettings().deleteAfterExport,\n  });\n  const [error, setError] = useState<string>(\"\");\n\n  if (!isAuthenticated) {\n    return <LoginPage />;\n  }\n\n  const handleDataLoaded = (loadedData: DataRow[], name: string) => {\n    setData(loadedData);\n    setFileName(name);\n    setError(\"\");\n    setCurrentStep(1);\n  };\n\n  const handleError = (errorMessage: string) => {\n    setError(errorMessage);\n  };\n\n  const handleMappingComplete = (newMappings: ColumnMapping[]) => {\n    setMappings(newMappings);\n  };\n\n  const handleGenerateReport = () => {\n    if (mappings.length === 0) {\n      setError(\"Please configure column mappings first\");\n      return;\n    }\n\n    const processed = processData(data, mappings);\n    setProcessedData(processed);\n\n    const title =\n      reportConfig.title || `${selectedTemplate.name} - ${fileName}`;\n    setReportConfig((prev) => ({\n      ...prev,\n      title,\n      template: selectedTemplate,\n    }));\n\n    setCurrentStep(2);\n    setError(\"\");\n  };\n\n  const handleExport = (format: \"pdf\" | \"excel\") => {\n    if (!processedData || !user) return;\n\n    addReportToHistory(\n      {\n        title: reportConfig.title,\n        templateName: selectedTemplate.name,\n        period: reportConfig.period || processedData.summary.period || \"N/A\",\n        totalRows: processedData.summary.totalRows,\n        totalAmount: processedData.summary.totalAmount,\n        exportedFormats: [format],\n        config: reportConfig,\n        mappings: mappings,\n        summary: processedData.summary,\n      },\n      user.id,\n    );\n\n    if (reportConfig.deleteAfterExport) {\n      setTimeout(() => {\n        setData([]);\n        setProcessedData(null);\n        setMappings([]);\n        setFileName(\"\");\n      }, 1000);\n    }\n  };\n\n  const allRequiredFieldsMapped = selectedTemplate.requiredFields.every(\n    (field) => mappings.some((m) => m.targetField === field),\n  );\n\n  const resetReport = () => {\n    setCurrentStep(0);\n    setData([]);\n    setMappings([]);\n    setProcessedData(null);\n    setFileName(\"\");\n    setReportConfig({\n      title: \"\",\n      period: \"\",\n      template: selectedTemplate,\n      includeCharts: false,\n      deleteAfterExport: getSettings().deleteAfterExport,\n    });\n  };\n\n  const handleLogoClick = () => {\n    router.push(\"/\");\n  };\n\n  return (\n    <main className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-background border-b sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div\n              className=\"flex items-center gap-3 cursor-pointer\"\n              onClick={handleLogoClick}\n            >\n              <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center\">\n                <BarChart3 className=\"w-6 h-6 text-primary-foreground\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-foreground\">\n                  AutoReport\n                </h1>\n                <p className=\"text-xs text-muted-foreground\">\n                  Automated Reporting & Data Recap System\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-6\">\n              {/* Navigation Tabs */}\n              <nav className=\"hidden md:flex items-center gap-1\">\n                {TABS.filter((tab) => !tab.adminOnly || isAdmin).map((tab) => {\n                  const Icon = tab.icon;\n                  return (\n                    <button\n                      key={tab.id}\n                      onClick={() => setActiveTab(tab.id)}\n                      className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                        activeTab === tab.id\n                          ? \"bg-primary/10 text-primary dark:bg-primary/20\"\n                          : \"text-muted-foreground hover:bg-muted\"\n                      }`}\n                    >\n                      <Icon className=\"w-4 h-4\" />\n                      {tab.label}\n                    </button>\n                  );\n                })}\n              </nav>\n\n              {/* Theme Toggle */}\n              <div className=\"flex items-center\">\n                <ModeToggle />\n              </div>\n\n              {/* User Menu */}\n              <div className=\"flex items-center gap-3 pl-6 border-l border-border\">\n                <div className=\"text-right hidden sm:block\">\n                  <p className=\"text-sm font-medium text-foreground\">\n                    {user?.name}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground flex items-center gap-1 justify-end\">\n                    {isAdmin ? (\n                      <>\n                        <Shield className=\"w-3 h-3\" /> Admin\n                      </>\n                    ) : (\n                      <>\n                        <User className=\"w-3 h-3\" /> User\n                      </>\n                    )}\n                  </p>\n                </div>\n                <button\n                  onClick={logout}\n                  className=\"p-2 text-muted-foreground hover:text-destructive transition-colors\"\n                  title=\"Logout\"\n                >\n                  <LogOut className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Mobile Navigation */}\n      <div className=\"md:hidden bg-background border-b\">\n        <div className=\"flex overflow-x-auto\">\n          {TABS.filter((tab) => !tab.adminOnly || isAdmin).map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center gap-2 px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors ${\n                  activeTab === tab.id\n                    ? \"text-primary border-b-2 border-primary\"\n                    : \"text-muted-foreground\"\n                }`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {tab.label}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {error && (\n          <div className=\"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive\">\n            {error}\n          </div>\n        )}\n\n        {/* Report Tab */}\n        {activeTab === \"report\" && (\n          <>\n            {/* Progress Steps */}\n            <div className=\"bg-background border border-border rounded-lg mb-6\">\n              <div className=\"px-4 sm:px-6 py-4\">\n                <div className=\"flex items-center\">\n                  {STEPS.map((step, index) => {\n                    const Icon = step.icon;\n                    const isActive = index === currentStep;\n                    const isCompleted = index < currentStep;\n                    return (\n                      <React.Fragment key={step.id}>\n                        <div\n                          className={`flex items-center gap-2 ${isActive ? \"text-primary\" : isCompleted ? \"text-green-600 dark:text-green-400\" : \"text-muted-foreground\"}`}\n                        >\n                          <div\n                            className={`w-8 h-8 rounded-full flex items-center justify-center ${isActive ? \"bg-primary/10\" : isCompleted ? \"bg-green-100 dark:bg-green-900/30\" : \"bg-muted\"}`}\n                          >\n                            {isCompleted ? (\n                              <CheckCircle2 className=\"w-5 h-5\" />\n                            ) : (\n                              <Icon className=\"w-4 h-4\" />\n                            )}\n                          </div>\n                          <span className=\"text-sm font-medium hidden sm:block\">\n                            {step.label}\n                          </span>\n                        </div>\n                        {index < STEPS.length - 1 && (\n                          <ChevronRight className=\"w-5 h-5 text-border mx-2\" />\n                        )}\n                      </React.Fragment>\n                    );\n                  })}\n                </div>\n              </div>\n            </div>\n\n            {/* Step 1: Upload */}\n            {currentStep === 0 && (\n              <div className=\"max-w-2xl mx-auto\">\n                <div className=\"bg-background rounded-xl shadow-sm border border-border p-6 mb-6\">\n                  <h2 className=\"text-2xl font-bold text-foreground mb-2\">\n                    Upload Your Data\n                  </h2>\n                  <p className=\"text-muted-foreground mb-6\">\n                    Start by uploading your Excel or CSV file. We&apos;ll\n                    automatically detect the structure and help you map the\n                    columns.\n                  </p>\n                  <FileUpload\n                    onDataLoaded={handleDataLoaded}\n                    onError={handleError}\n                  />\n                </div>\n                <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n                  <h3 className=\"text-lg font-semibold text-foreground mb-4\">\n                    Select Report Template\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {REPORT_TEMPLATES.map((template) => (\n                      <label\n                        key={template.id}\n                        className={`flex items-start gap-4 p-4 rounded-lg border-2 cursor-pointer transition-all ${\n                          selectedTemplate.id === template.id\n                            ? \"border-primary bg-primary/5\"\n                            : \"border-border hover:border-muted-foreground\"\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"template\"\n                          value={template.id}\n                          checked={selectedTemplate.id === template.id}\n                          onChange={() => setSelectedTemplate(template)}\n                          className=\"mt-1 w-4 h-4 text-primary\"\n                        />\n                        <div>\n                          <p className=\"font-semibold text-foreground\">\n                            {template.name}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {template.description}\n                          </p>\n                          <div className=\"mt-2 flex flex-wrap gap-1\">\n                            {template.requiredFields.map((field) => (\n                              <span\n                                key={field}\n                                className=\"px-2 py-0.5 bg-destructive/10 text-destructive text-xs rounded\"\n                              >\n                                {field} *\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Map Columns */}\n            {currentStep === 1 && (\n              <div className=\"max-w-5xl mx-auto\">\n                <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-foreground\">\n                        Map Columns\n                      </h2>\n                      <p className=\"text-muted-foreground\">\n                        File: <span className=\"font-medium\">{fileName}</span> (\n                        {data.length.toLocaleString()} rows)\n                      </p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => setCurrentStep(0)}\n                        className=\"px-4 py-2 text-muted-foreground hover:text-foreground transition-colors\"\n                      >\n                        Back\n                      </button>\n                      <button\n                        onClick={handleGenerateReport}\n                        disabled={!allRequiredFieldsMapped}\n                        className=\"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                      >\n                        Generate Report\n                      </button>\n                    </div>\n                  </div>\n                  <SavedMappings\n                    template={selectedTemplate}\n                    currentMappings={mappings}\n                    onLoadMapping={handleMappingComplete}\n                  />\n                  <div className=\"mt-6\">\n                    <ColumnMapper\n                      columns={Object.keys(data[0] || {})}\n                      template={selectedTemplate}\n                      onMappingComplete={handleMappingComplete}\n                      data={data}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Step 3: Preview & Export */}\n            {currentStep === 2 && processedData && (\n              <div className=\"max-w-6xl mx-auto\">\n                <div className=\"bg-background rounded-xl shadow-sm border border-border p-6\">\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-foreground\">\n                        Report Preview\n                      </h2>\n                      <p className=\"text-muted-foreground\">\n                        Review your report and export it in your preferred\n                        format\n                      </p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => setCurrentStep(1)}\n                        className=\"px-4 py-2 text-muted-foreground hover:text-foreground transition-colors\"\n                      >\n                        Back\n                      </button>\n                      <button\n                        onClick={resetReport}\n                        className=\"px-4 py-2 text-primary hover:text-primary/80 transition-colors\"\n                      >\n                        New Report\n                      </button>\n                    </div>\n                  </div>\n                  <div className=\"mb-6 p-4 bg-muted rounded-lg border border-border\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-foreground mb-1\">\n                          Report Title\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={reportConfig.title}\n                          onChange={(e) =>\n                            setReportConfig((prev) => ({\n                              ...prev,\n                              title: e.target.value,\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 bg-background border border-input rounded-lg focus:ring-2 focus:ring-ring focus:border-ring text-foreground\"\n                          placeholder=\"Enter report title\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-foreground mb-1\">\n                          Period\n                        </label>\n                        <select\n                          value={reportConfig.period}\n                          onChange={(e) =>\n                            setReportConfig((prev) => ({\n                              ...prev,\n                              period: e.target.value,\n                            }))\n                          }\n                          className=\"w-full px-3 py-2 bg-background border border-input rounded-lg focus:ring-2 focus:ring-ring focus:border-ring text-foreground\"\n                        >\n                          <option value=\"\">Select Period</option>\n                          <option value=\"Daily\">Daily</option>\n                          <option value=\"Weekly\">Weekly</option>\n                          <option value=\"Monthly\">Monthly</option>\n                          <option value=\"Yearly\">Yearly</option>\n                        </select>\n                      </div>\n                    </div>\n                    <div className=\"mt-4\">\n                      <label className=\"flex items-center gap-2\">\n                        <input\n                          type=\"checkbox\"\n                          checked={reportConfig.deleteAfterExport}\n                          onChange={(e) =>\n                            setReportConfig((prev) => ({\n                              ...prev,\n                              deleteAfterExport: e.target.checked,\n                            }))\n                          }\n                          className=\"w-4 h-4 text-primary rounded focus:ring-ring\"\n                        />\n                        <span className=\"text-sm text-foreground\">\n                          Delete uploaded data after export (for privacy)\n                        </span>\n                      </label>\n                    </div>\n                  </div>\n                  <ReportViewer\n                    processedData={processedData}\n                    config={reportConfig}\n                    template={selectedTemplate}\n                    onExport={handleExport}\n                  />\n                </div>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* History Tab */}\n        {activeTab === \"history\" && <ReportHistoryViewer />}\n\n        {/* Settings Tab */}\n        {activeTab === \"settings\" && <BackupRestore />}\n\n        {/* Admin Tab */}\n        {activeTab === \"admin\" && isAdmin && <UserManagement />}\n      </div>\n\n      {/* Footer */}\n      <footer className=\"bg-background border-t mt-auto\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <p className=\"text-center text-sm text-muted-foreground\">\n            Automated Reporting & Data Recap System  Built for schools,\n            offices, and SMEs\n          </p>\n        </div>\n      </footer>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}